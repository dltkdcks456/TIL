# 캐시 기본 동작

![image-20221213141141072](assets/image-20221213141141072.png)

![image-20221213141313025](assets/image-20221213141313025.png)

![image-20221213141324541](assets/image-20221213141324541.png)

![image-20221213141353393](assets/image-20221213141353393.png)

![image-20221213141430283](assets/image-20221213141430283.png)

![image-20221213141457630](assets/image-20221213141457630.png)

![image-20221213141503574](assets/image-20221213141503574.png)

![image-20221213141512965](assets/image-20221213141512965.png)

![image-20221213141531703](assets/image-20221213141531703.png)

![image-20221213141538993](assets/image-20221213141538993.png)

![image-20221213141553728](assets/image-20221213141553728.png)

![image-20221213141605680](assets/image-20221213141605680.png)

> 캐시 유효 시간이 초과했다고 해서 다시 같은 자료를 보내는 것은 비효율 적임.



### 검증 헤더와 조건부 요청1

![image-20221213141800699](assets/image-20221213141800699.png)

![image-20221213141834182](assets/image-20221213141834182.png)

![image-20221213141939850](assets/image-20221213141939850.png)

![image-20221213142002258](assets/image-20221213142002258.png)

![image-20221213142125616](assets/image-20221213142125616.png)

![image-20221213142134525](assets/image-20221213142134525.png)

![image-20221213142204592](assets/image-20221213142204592.png)

![image-20221213142246035](assets/image-20221213142246035.png)

![image-20221213142357252](assets/image-20221213142357252.png)

![image-20221213142427389](assets/image-20221213142427389.png)

![image-20221213142435305](assets/image-20221213142435305.png)

> Last-Modified가 검증할 수 있는 값(검증 헤더)
>
> if-modified-since는 조건부 요청
>
> 변경되지 않으면 로컬에 들고 있는 데이터를 다시 재사용할 수 있다.

![image-20221213142659938](assets/image-20221213142659938.png)

> 색깔이 연한 것은 캐쉬에서 불러온 것이다.



### 검증 헤더와 조건부 요청2

![image-20221213142902845](assets/image-20221213142902845.png)

![image-20221213143031778](assets/image-20221213143031778.png)

> 304의 리다이렉션은 너의 캐시로 가서 그 데이터를 가져오라고 보낸다

![image-20221213155539054](assets/image-20221213155539054.png)

> 0.x초 단위로는 확인이 안된다
>
> A -> B -> A로 되었을 때 컨텐츠는 갱신이 실제로 안된 경우가 있다.
>
> 임의로 캐시를 조율하고 싶을 때

![image-20221213155725862](assets/image-20221213155725862.png)

> 날짜가 아닌 이름을 달아줌
>
> Hash는 내용이 동일하면 동일한 컨텐츠가 나온다

![image-20221213155856257](assets/image-20221213155856257.png)

![image-20221213155914152](assets/image-20221213155914152.png)

![image-20221213155920060](assets/image-20221213155920060.png)

![image-20221213155928229](assets/image-20221213155928229.png)

![image-20221213155936140](assets/image-20221213155936140.png)

![image-20221213155948420](assets/image-20221213155948420.png)

![image-20221213160004902](assets/image-20221213160004902.png)

![image-20221213160012767](assets/image-20221213160012767.png)

![image-20221213160029726](assets/image-20221213160029726.png)

![image-20221213160147578](assets/image-20221213160147578.png)

![image-20221213160203292](assets/image-20221213160203292.png)

> no-cache는 내용이 변경됬는지 안 됐는지 무조건 확인하고 하라는 의미

![image-20221213160411342](assets/image-20221213160411342.png)

> 하위 호환을 위한 것이라 거의 사용하지 않는다

![image-20221213160419983](assets/image-20221213160419983.png)

![image-20221213160428377](assets/image-20221213160428377.png)

![image-20221213160722622](assets/image-20221213160722622.png)

![image-20221213160744247](assets/image-20221213160744247.png)

![image-20221213160751486](assets/image-20221213160751486.png)

> CDN같은 것들로 활용한다

![image-20221213160756880](assets/image-20221213160756880.png)

![image-20221213160803923](assets/image-20221213160803923.png)

![image-20221213161253146](assets/image-20221213161253146.png)

> 기본적으로 웹 브라우저가 일정부분 캐시를 해준다(회원의 통장 잔고 등)
>
> 저 2개를 모두 넣어주면 확실히 대응이 된다.

![image-20221213161300967](assets/image-20221213161300967.png)

![image-20221213161525728](assets/image-20221213161525728.png)

![image-20221213161533016](assets/image-20221213161533016.png)

![image-20221213161540879](assets/image-20221213161540879.png)

> 순간 네트워크 단절이 생기면 프록시 캐시가 옛 데이터라도 보여주자고 응답해버림

![image-20221213161547864](assets/image-20221213161547864.png)