# Process 2

- **Thread**

  - 프로세스 내부에 CPU 수행 단위가 여러 개 있는 경우를 말함

  - 프로세스가 하나 주어지면 code, data, stack의 주소 공간이 만들어지고, 프로세스 하나를 관리하기 위해 PCB가 만들어지고, 내에서 프로세스 상태가 만들어지고, 메모리의 어느 부분을 실행하는지 가리키고 있는 Program counter과 레지스터가 존재.
  - 동일한 작업을 하는 프로세스를 여러 개 띄울 때는 주소 공간을 하나만 띄우고, CPU가 코드의 어느 부분을 실행하고 있는지 프로그램 카운터만 여러 개를 둠. 

  - 스레드 내부에는 코드의 어느 부분이 실행되는지 프로그램 카운터가 있어야 하고, 레지스터의 어떤 값을 가졌는지를 별도로 가짐

  - 함수를 호출하고 리턴하는 정보를 stack에 쌓는데, 스레드는 여러개의 스택을 가짐
  - 각종 자원들을 최대한 공유하고, 별도로 가지는 것은 CPU 수행과 관련된 정보, 프로그램 카운터, 레지스터, 스택 같은 것들만 다름
  - lightweight process라고 부른다.

- Thread의 구성(CPU수행과 관련된 부분)
  - Program counter
  - register set
  - stack space
- Thread가 동료 thread와 공유하는 부분(=task)
  - code section
  - data section
  - OS resources

- Thread의 장점
  - 다중 스레드로 구성된 테스크 구조에서는 하나의 서버 스레드가 blocked(waiting) 상태인 동안에도 동일한 태스크 내의 다른 스레드가 실행(running)되어 빠른 처리를 할 수 있다.(**응답성!**)
    - 하나의 스레드가 network작업 중일 때 다른 스레드는 화면처리를 할 수 있게 된다.
  - 동일한 일을 수행하는 다중 스레드가 협력하여 높은 처리율(throughput)과 성능 향상을 얻을 수 있다.
  - 스레드를 사용하면 병렬성을 높일 수 있다.
  - 동일 작업인데 프로세스를 여러 개 생성하면 메모리의 낭비가 심하다.
  - ex) 웹 브라우저를 여러 개 띄우거나 등등...

![image-20221025133153421](Process(2).assets/image-20221025133153421.png)

- 스레드는 커널 스레드와 라이브러리 스레드로 나뉠 수 있다.



======================================================================

출처: https://core.ewha.ac.kr/publicview/C0101020140321143516139010?vmode=f